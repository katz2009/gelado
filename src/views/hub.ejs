<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hub</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <header>
    <h1>Meu Sistema de Eventos</h1>
    <nav>
      <a href="/hub">Hub</a> |
      <a href="/register">Cadastrar Usuário</a> |
      <a href="/events/create">Criar Evento</a>
    </nav>
    <hr />
  </header>

  <main>
    <section>
        <h2>Bem-vindo!</h2>
        <% if (user) { %>
          <p>Logado como <strong><%= user.name %></strong> (ID: <%= user.id %>)</p>
        <% } else { %>
          <p>Nenhum usuário cadastrado nesta sessão.</p>
        <% } %>
      </section>
      
      <section>
        <h2>Eventos Registrados</h2>
        <ul id="eventList"></ul>
      </section>
      
      <script>
        async function loadEvents () {
          const res  = await fetch('/api/events');
          const list = await res.json();
          const ul   = document.getElementById('eventList');
          ul.innerHTML = '';
          list.forEach(ev => {
            const li = document.createElement('li');
            li.textContent = `${ev.id} - ${ev.title} (${new Date(ev.date).toLocaleDateString()})`;
            ul.appendChild(li);
          });
        }
        loadEvents();
      </script>      
</body>
</html>